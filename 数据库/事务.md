**数据库事务有四个特性（ACID）**

​	原子性：

​		事务中所有的操作是不可在分割的原子单位。事务中所有操作要么全部执行成功，要么全部执行失败

​	一致性：

​		事务执行后，数据库状态与其他业务规则保持一致。如转账业务，无论事务执行是否成功，参与转账的		两个账号余额之和应该是不变的

​	隔离性：

​		隔离性是指在并发操作中，不同事务之间应该隔离开来，使每个并发中的事务不会互相干扰	

​	持久性：

​		一旦事务提交成功，事务中所有的数据操作都必须被持久化到数据库中，即使提交事务后，数据库立马崩溃，在数据库重启时，也必须能保证通过某种机制恢复数据

**JDBC事务**

​	在jdbc中处理事务，都是通过connection完成的

​	*同一事务中所有的操作，都在使用同一个connection对象

​	*connection的三个方法与事务相关

​		1.setAutoCommit(boolean)：设置是否为自动提交事务，如果true（默认值就是true）表示自动提交，		也就是每条执行的SQL语句都是一个单独的事务，如果设置false，那么就相当于开启了事务,

​		con.setAutoCommit(false)表示开启事务



​		2.commit（）：提交结束事务：con.commit()表示提交事务

​		3.rollback（）：回滚结束事务，con.rollback：表示回滚事务

​	*jdbc处理事务的代码格式：

​		try{

​			con.setAutoCommit(false);

​			.....

​			con.commit();

​		}catch(){

​			con.rollback();

​		}finally{

​			coon.close();

​		}

**事务的并发读问题**

 * 脏读：读取到另一个事务为提交的数据

   ![1594280186247](C:\Users\hl2333\AppData\Roaming\Typora\typora-user-images\1594280186247.png)

 * 不可重复读：对同一记录的两次读取不一致，因为另一事务对该记录做了修改

   ![1594280370015](C:\Users\hl2333\AppData\Roaming\Typora\typora-user-images\1594280370015.png)

 * 幻读：对同一张表的两次查询不一致，因为另一个事务插入了一条记录

   

​		4个等级的事务隔离级别，在相同的输入，执行相同工作，根据不同的隔离级别，可以导致不同的结果。不同事务隔离界别能够解决的数据并问题的能力是不同的。

​			1.SERIAUZABLE(串行化)

​					*不会出现任何并发问题，因为他对同一数据的访问是串行的，非并发访问的

​					*性能最差

​			2.REPEATABLE READ(可重复读)（MySQL的默认隔离级别）(在同一次事务中，对数据库进行快照，本次事务操作的是数据都是第一次读到的数据)

​					*防止脏读和不可重复读，不能处理幻读问题

​					*性能比SERIAUZABLE好

![1594281092406](C:\Users\hl2333\AppData\Roaming\Typora\typora-user-images\1594281092406.png)

​			3.READ COMMITTED（读取已提交数据）(oracle默认隔离级别)

​					*防止脏读，没有处理不可重复读，也没有处理幻读

​					*性能比REPEATABLE READ好

​			4.READ UNCOMMITTED(读取未提交数据)

​					*可能出现任何事物并发问题

​					*性能最好
